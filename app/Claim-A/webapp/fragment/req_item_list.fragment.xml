<core:FragmentDefinition
    xmlns:unified="sap.ui.unified" 
    xmlns:columnmenu="sap.m.table.columnmenu" 
    xmlns:table="sap.ui.table" 
    xmlns:m="sap.m"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:tnt="sap.tnt"
    xmlns:cards="sap.f.cards"
    xmlns:f="sap.f"
    xmlns:l="sap.ui.layout"
    xmlns:cssgrid="sap.ui.layout.cssgrid"
    xmlns:w="sap.ui.integration.widgets"
    xmlns:card="sap.f.cards"
    xmlns:core="sap.ui.core"
    xmlns:Icon="sap.ui.core.Icon"
    xmlns:ShellBar="sap.f.ShellBar"
    xmlns:layout="sap.ui.layout">
    <VBox
        id="request_item_list_fragment" 
        backgroundDesign="Solid"
        class="roundedBox sapUiSmallMargin"
        rowGap="1rem">
        <VBox width="100%" rowGap="1rem">
            <OverflowToolbar
                height="3rem"
                style="Clear">
                <m:Title text="{i18n>req_form_detail_title} ({= ${request>/req_item_rows}.length })" titleStyle="H3" />
                <m:ToolbarSpacer />
                <m:Button text="{i18n>req_b_create_item}"   type="Emphasized"   icon="sap-icon://add"       press=".onPressAddItem"     enabled="{= ${request>/view} !== 'view' }" />
                <m:Button text="{i18n>req_b_edit}"          type="Default"                                  press=".onSelectEdit"       enabled="{= ${request>/view} !== 'view' }"/>
                <m:Button text="{i18n>req_b_delete}"        type="Default"                                  press=".onRowDeleteReqItem" enabled="{= ${request>/view} !== 'view' }" />
            </OverflowToolbar>
            <VBox rowGap="1rem">
                <table:Table 
                    id="req_item_table"
                    rows="{request>/req_item_rows}"
                    columnHeaderHeight="3rem"
                    selectionMode="MultiToggle"
                    ariaLabelledBy="title"
                    width="auto"
                    rowActionCount="2">
                    <table:Column  width="25rem">
                        <m:Label text="{i18n>req_i_claim_type}"></m:Label>
                        <table:template>
                            <!-- <m:Text text="{TYPE_OF_TRANSPORTATION}" wrapping="false" /> -->
                            <m:Text text="{request>REQUEST_ID}" wrapping="false" />
                        </table:template>
                    </table:Column>
                    <table:Column  width="25rem">
                        <m:Label text="{i18n>req_i_claim_type_item}"></m:Label>
                        <table:template>
                            <m:Text text="{request>CLAIM_TYPE_ITEM_ID}" wrapping="false" />
                        </table:template>
                    </table:Column>
                    <table:Column  width="15rem">
                        <m:Label text="{i18n>req_i_est_amt}"></m:Label>
                        <table:template>
                            <m:Text text="MYR {request>AMOUNT}" textDirection="RTL"></m:Text>
                            <!-- <unified:Currency value="{request>AMOUNT}"/> -->
                        </table:template>
                    </table:Column>
                    <table:Column  width="15rem">
                        <m:Label text="{i18n>req_i_estparticipant}"></m:Label>
                        <table:template>
                            <m:Text text="{request>TYPE_OF_TRANSPORTATION}" wrapping="false" />
                        </table:template>
                    </table:Column>
                    <table:rowActionTemplate>
                        <table:RowAction> 
                            <table:items>
                                <!-- <table:RowActionItem icon="sap-icon://edit" text="{i18n>req_b_edit}"        press=".onSelectEdit"/> -->
                                <table:RowActionItem type="Delete"      press=".onRowDeleteReqItem" visible="{= ${request>/view} !== 'view' }"/>
                                <table:RowActionItem type="Navigation"  press=".navToItemDetail"/>
                            </table:items>
                        </table:RowAction>
                    </table:rowActionTemplate>
                </table:Table>
            </VBox>
        </VBox>
    </VBox>
</core:FragmentDefinition>
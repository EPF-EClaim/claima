<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:form="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f="sap.f"
    xmlns:unified="sap.ui.unified"
    xmlns:table="sap.ui.table" >
    <VBox
        id="request_create_item_fragment" 
        backgroundDesign="Solid"
        class="roundedBox sapUiSmallMargin"
        rowGap="1rem">
        <VBox width="100%" height="100%" rowGap="1rem">
            <OverflowToolbar height="3rem">
                <Title text="Request Details" titleStyle="H4" />
                <ToolbarSpacer />
                <MenuButton text="Save Request" buttonMode="Split" defaultAction="onSave" beforeMenuOpen="onBeforeMenuOpen" useDefaultActionOnly="true">
                    <menu>
                        <Menu itemSelected="onMenuAction">
                            <MenuItem text="Save and add another" press=".onSaveAddAnother" />
                        </Menu>
                    </menu>
                </MenuButton>
            </OverflowToolbar>
            <VBox rowGap="1rem">
                <form:SimpleForm 
                    layout="ColumnLayout">
                    <Label text="Claim Type" />
                    <Select width="25rem" >
                        <items>
                            <core:Item key="CT1" text="Claim Type 1" />
                            <core:Item key="CT2" text="Claim Type 2" />
                            <core:Item key="CT3" text="Claim Type 3" />
                            <core:Item key="CT4" text="Claim Type 4" />
                        </items>
                    </Select>
                    <Label text="Claim Type Item" />
                    <Select width="25rem" >
                        <items>
                            <core:Item key="CI1" text="Claim Type Item 1" />
                            <core:Item key="CI2" text="Claim Type Item 2" />
                            <core:Item key="CI3" text="Claim Type Item 3" />
                            <core:Item key="CI4" text="Claim Type Item 4" />
                        </items>
                    </Select>
                    <Label text="Estimated No. of Participants" />
                    <Input id="estNoOfParticipant" textAlign="Begin" width="25rem" type="Number"/>
                    <Label text="Estimated Amount" />
                    <Input id="estAmount" textAlign="Begin" width="25rem" type="Number"/>
                </form:SimpleForm>
                <VBox rowGap="0.5rem">
                    <OverflowToolbar height="3rem">
                        <Title text="Participant Details" titleStyle="H4" />
                        <ToolbarSpacer />
                        <unified:FileUploader
                            id="fuImport"
                            icon="sap-icon://upload"
                            buttonOnly="true"
                            buttonText="Upload XSLX"
                            fileType="csv,xlsx"
                            change=".onImportChange"
                            style="Emphasized"/>
                        <Button icon="sap-icon://delete" text="Delete" press=".onRowDeleteParticipant"/>
                    </OverflowToolbar>
                    <table:Table 
                        id="req_participant_table"
                        rows="{/participant}"
                        columnHeaderHeight="3rem"
                        selectionMode="MultiToggle"
                        rowActionCount="1">
                        <table:Column width="25rem">
                            <Label text="Participant"></Label>
                            <table:template>
                                <Input id="participant_name" textAlign="Begin" value="{participant_name}" change=".appendNewRow"></Input>
                            </table:template>
                        </table:Column>
                        <table:Column width="25rem">
                            <Label text="Employee Cost Center"></Label>
                            <table:template>
                                <Text text="cost_center" />
                            </table:template>
                        </table:Column>
                        <table:Column width="25rem">
                            <Label text="Allocated Amount"></Label>
                            <table:template>
                                <Input id="alloc_amount" textAlign="End" value="{alloc_amount}" type="Number"></Input>
                            </table:template>
                        </table:Column>
                        <table:rowActionTemplate>
                            <table:RowAction>
                                <table:items>
                                    <table:RowActionItem type="Delete" press="onRowDeleteParticipant"></table:RowActionItem>
                                </table:items>
                            </table:RowAction>
                        </table:rowActionTemplate>
                    </table:Table>
                </VBox>
            </VBox>
        </VBox>
    </VBox>
</core:FragmentDefinition>